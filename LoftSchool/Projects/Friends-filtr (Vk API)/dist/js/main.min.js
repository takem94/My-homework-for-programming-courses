!function i(a,s,l){function c(t,e){if(!s[t]){if(!a[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return c(a[t][1][e]||e)},o,o.exports,i,a,s,l)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(e,t,r){t.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},{}],2:[function(e,t,r){function l(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}t.exports=function(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var n=s.apply(e,a);function o(e){l(n,t,r,o,i,"next",e)}function i(e){l(n,t,r,o,i,"throw",e)}o(void 0)})}}},{}],3:[function(e,t,r){t.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],4:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},{}],5:[function(e,t,r){t.exports=function(e){return e&&e.__esModule?e:{default:e}}},{}],6:[function(e,t,r){t.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},{}],7:[function(e,t,r){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},{}],8:[function(e,t,r){var n=e("./arrayWithoutHoles"),o=e("./iterableToArray"),i=e("./nonIterableSpread");t.exports=function(e){return n(e)||o(e)||i()}},{"./arrayWithoutHoles":1,"./iterableToArray":6,"./nonIterableSpread":7}],9:[function(e,t,r){var n=function(){return this||"object"==typeof self&&self}()||Function("return this")(),o=n.regeneratorRuntime&&0<=Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime"),i=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=e("./runtime"),o)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},{"./runtime":10}],10:[function(e,D,t){!function(e){"use strict";var l,t=Object.prototype,c=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",n=r.asyncIterator||"@@asyncIterator",i=r.toStringTag||"@@toStringTag",a="object"==typeof D,s=e.regeneratorRuntime;if(s)a&&(D.exports=s);else{(s=e.regeneratorRuntime=a?D.exports:{}).wrap=w;var f="suspendedStart",d="suspendedYield",h="executing",p="completed",m={},u={};u[o]=function(){return this};var g=Object.getPrototypeOf,y=g&&g(g(I([])));y&&y!==t&&c.call(y,o)&&(u=y);var v=x.prototype=_.prototype=Object.create(u);L.prototype=v.constructor=x,x.constructor=L,x[i]=L.displayName="GeneratorFunction",s.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===L||"GeneratorFunction"===(t.displayName||t.name))},s.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,x):(e.__proto__=x,i in e||(e[i]="GeneratorFunction")),e.prototype=Object.create(v),e},s.awrap=function(e){return{__await:e}},E(C.prototype),C.prototype[n]=function(){return this},s.AsyncIterator=C,s.async=function(e,t,r,n){var o=new C(w(e,t,r,n));return s.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},E(v),v[i]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},s.keys=function(r){var n=[];for(var e in r)n.push(e);return n.reverse(),function e(){for(;n.length;){var t=n.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},s.values=I,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var n=this;function e(e,t){return i.type="throw",i.arg=r,n.next=e,t&&(n.method="next",n.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=c.call(o,"catchLoc"),s=c.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&c.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=l),m}}}function w(e,t,r,n){var i,a,s,l,o=t&&t.prototype instanceof _?t:_,c=Object.create(o.prototype),u=new j(n||[]);return c._invoke=(i=e,a=r,s=u,l=f,function(e,t){if(l===h)throw new Error("Generator is already running");if(l===p){if("throw"===e)throw t;return S()}for(s.method=e,s.arg=t;;){var r=s.delegate;if(r){var n=O(r,s);if(n){if(n===m)continue;return n}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===f)throw l=p,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=h;var o=b(i,a,s);if("normal"===o.type){if(l=s.done?p:d,o.arg===m)continue;return{value:o.arg,done:s.done}}"throw"===o.type&&(l=p,s.method="throw",s.arg=o.arg)}}),c}function b(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function _(){}function L(){}function x(){}function E(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function C(l){var t;this._invoke=function(r,n){function e(){return new Promise(function(e,t){!function t(e,r,n,o){var i=b(l[e],l,r);if("throw"!==i.type){var a=i.arg,s=a.value;return s&&"object"==typeof s&&c.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,n,o)},function(e){t("throw",e,n,o)}):Promise.resolve(s).then(function(e){a.value=e,n(a)},function(e){return t("throw",e,n,o)})}o(i.arg)}(r,n,e,t)})}return t=t?t.then(e,e):e()}}function O(e,t){var r=e.iterator[t.method];if(r===l){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=l,O(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=b(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,m;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=l),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(c.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=l,e.done=!0,e};return n.next=n}}return{next:S}}function S(){return{value:l,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},{}],11:[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":9}],12:[function(r,e,t){(function(h){"use strict";var e=r("@babel/runtime/helpers/interopRequireDefault"),p=e(r("@babel/runtime/regenerator")),m=e(r("@babel/runtime/helpers/asyncToGenerator")),i=e(r("@babel/runtime/helpers/toConsumableArray")),g=r("./modules/dnd"),y=r("./modules/getCookies"),v=r("./modules/isMatching");function w(e){return new Promise(function(t,r){h.VK.init({apiId:6899585}),h.VK.Auth.login(function(e){e.session?t(e):r(new Error("Не удалось авторизоваться."))},e)})}function b(e,n){return new Promise(function(t,r){n.v="5.92",h.VK.api(e,n,function(e){e.error?r(new Error("Ошибка вызова метода")):t(e)})})}function _(n,o){return function(e){var t,r;(t=e.classList).remove.apply(t,(0,i.default)(n)),(r=e.classList).add.apply(r,(0,i.default)(o))}}function t(){var t=document.getElementById("loginBtn"),e=document.querySelector(".friends-filter__body"),c=document.querySelector("#allFriends .simplebar-content"),u=document.querySelector("#favoriteFriends .simplebar-content"),f=document.getElementById("friendsElem").innerHTML,r=document.getElementById("searchAll"),n=document.getElementById("searchFav"),o=document.getElementById("btnSave"),d=[],i=(0,y.getCookies)();i.users_id&&(d=JSON.parse(i.users_id));var a={fromZone:c,toZone:u,fromId:"allFriends",toId:"favoriteFriends",elemClass:"friends-list__elem",toWrapperClass:"friends-filter__body-list",transformBtn:_(["friends-list__elem-action_add","cross_rotate"],["friends-list__elem-action_rm"])};function s(){return(s=(0,m.default)(p.default.mark(function e(){var t,r,n,o,i,a,s,l;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(6);case 3:return t=e.sent,e.next=6,b("users.get",{fields:" photo_100"});case 6:return t=e.sent,r=document.querySelector(".header-content__user"),n=document.querySelector(".header-content__user-name"),o=r.querySelector("img"),n.innerHTML="".concat(t.response[0].first_name," <span>").concat(t.response[0].last_name,"</span>"),o.src=t.response[0].photo_100,r.classList.remove("hide"),i={items:[]},e.next=16,b("friends.get",{fields:" photo_100"});case 16:for(t=e.sent,a=t.response.items.length-1;0<=a;--a)s=t.response.items[a],d.includes(s.id+"")&&(s.rm=!0,i.items.push(s),t.response.items.splice(a,1));l=h.Handlebars.compile(f),c.innerHTML=l(t.response),u.innerHTML=l(i),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.error(e.t0.message);case 26:case"end":return e.stop()}},e,null,[[0,23]])}))).apply(this,arguments)}function l(a){return function(e){for(var t=a.querySelectorAll(".friends-list__elem"),r=e.target.value,n=0;n<t.length;++n){var o=t[n],i=o.children[1].innerText;(0,v.isMatching)(i,r)?o.style.display="flex":o.style.display="none"}}}new g.DnD(a).init(),a.fromZone=u,a.toZone=c,a.fromId="favoriteFriends",a.toId="allFriends",a.transformBtn=_(["friends-list__elem-action_rm"],["friends-list__elem-action_add","cross_rotate"]),new g.DnD(a).init(),t.addEventListener("click",function e(){!function(){s.apply(this,arguments)}(),t.removeEventListener("click",e),t.classList.add("hide")}),r.addEventListener("input",l(c)),n.addEventListener("input",l(u)),o.addEventListener("click",function(){var e=u.children;d=[];for(var t=0;t<e.length;++t)e[t].dataset.id&&d.push(e[t].dataset.id);if(d.length)return window.alert("Нет друзей для сохранения"),null;var r=new Date;r.setTime(r.getTime()+31536e6),r=r.toUTCString();var n=JSON.stringify(d);document.cookie="users_id=".concat(n,"; expires=").concat(r,"; path=/"),window.alert("Друзья сохранены в избранные")}),e.addEventListener("click",function(e){var t=e.target.parentNode;e.target.classList.contains("friends-list__elem-action_add")?(_(["friends-list__elem-action_add","cross_rotate"],["friends-list__elem-action_rm"])(e.target),u.appendChild(t)):e.target.classList.contains("friends-list__elem-action_rm")&&(_(["friends-list__elem-action_rm"],["friends-list__elem-action_add","cross_rotate"])(e.target),c.appendChild(t))})}window.addEventListener("DOMContentLoaded",t)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./modules/dnd":13,"./modules/getCookies":14,"./modules/isMatching":15,"@babel/runtime/helpers/asyncToGenerator":2,"@babel/runtime/helpers/interopRequireDefault":5,"@babel/runtime/helpers/toConsumableArray":8,"@babel/runtime/regenerator":11}],13:[function(e,t,r){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.DnD=void 0;var o=n(e("@babel/runtime/helpers/classCallCheck")),i=n(e("@babel/runtime/helpers/createClass")),a=function(){function t(e){(0,o.default)(this,t),this.from=e.fromZone,this.to=e.toZone,this.fromId=e.fromId,this.toId=e.toId,this.elemClass=e.elemClass,this.toWrapperClass=e.toZoneWrapperClass,this.transformBtn=e.transformBtn,this.clone=null,this.original=null,this.offsetY=null,this.offsetX=null}return(0,i.default)(t,[{key:"init",value:function(){var s=this;function t(e){var t=s.clone.getBoundingClientRect(),r=e.pageY-s.offsetY,n=e.pageX-s.offsetX;r<0?r=0:r+t.height>window.innerHeight&&(r=window.innerHeight-t.height),n<0?n=0:n+t.width>window.innerWidth&&(n=window.innerWidth-t.width),s.clone.style.top=r+"px",s.clone.style.left=n+"px"}function r(e){a("removeEventListener"),s.original.style.opacity=1,s.clone.outerHTML="",s.clone=null,s.original=null}function n(e){e.target.classList.contains(s.elemClass)&&(e.target.style.borderTop="60px solid white",e.target.addEventListener("mouseleave",o))}function o(e){e.target.classList.contains(s.elemClass)&&(e.target.style.borderTop="0 solid white",e.target.removeEventListener("mouseleave",o))}function i(e){var t=e.target===s.to,r=e.target.classList.contains(s.elemClass),n=!1,o=e.target;if(r)for(;!o.classList.contains(s.toWrapperClass);){if(o.id&&o.id===s.toId){n=!0;break}o=o.parentElement}if(t||r){var i=s.original.lastElementChild;if(s.transformBtn(i),n){var a=e.target.style.transition;e.target.style.transition="border 0s",e.target.style.borderTop="0px",e.target.offsetHeight,e.target.parentNode.insertBefore(s.original,e.target),e.target.style.transition=a}else e.target.appendChild(s.original)}}function a(e){document[e]("mousemove",t),document[e]("mouseup",r),s.to[e]("mouseover",n),s.to[e]("mouseleave",o),s.to[e]("mouseup",i)}this.from.addEventListener("mousedown",function(e){if(!e.target.classList.contains(s.elemClass))return;var t=e.target.getBoundingClientRect();s.offsetY=e.pageY-t.top,s.offsetX=e.pageX-t.left,s.clone=e.target.cloneNode(!0),s.clone.classList.add("clone"),s.clone.style.top=t.top+"px",s.clone.style.left=t.left+"px",document.body.appendChild(s.clone),s.original=e.target,s.original.style.opacity=0,s.original.ondragstart=s.clone.ondragstart=function(){return!1},a("addEventListener")})}}]),t}();r.DnD=a},{"@babel/runtime/helpers/classCallCheck":3,"@babel/runtime/helpers/createClass":4,"@babel/runtime/helpers/interopRequireDefault":5}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getCookies=function(){var r={},e=document.cookie;if(e.length<1)return r;return(e=e.split("; ")).forEach(function(e){var t=e.split("=");r[t[0]]=t[1]}),r}},{}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isMatching=function(e,t){return new RegExp(t,"i").test(e)}},{}]},{},[12]);